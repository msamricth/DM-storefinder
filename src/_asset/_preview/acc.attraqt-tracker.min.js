ACC.attraqTracker={_autoload:["setUserObject","bindOosItemsHomepageOverlay","bindOosCartPage"],trackerQueue:"tracker_queuedActivities",bindOosItemsHomepageOverlay:function(){$(".oos-box__homepage .checkout-order-summary-list-items:visible").each(function(){ACC.attraqTracker.trackRemoveFromCart($(this).data("baseproductcode"))})},bindOosCartPage:function(){$(".js-cart-items .item-removed").each(function(){ACC.attraqTracker.trackRemoveFromCart($(this).data("baseproductcode"))})},trackProductView:function(productCode,sourceId){ACC.attraqTracker.submitTrackEvent({action:"view",target:{product:""+productCode},sourceId:""+sourceId})},submitTrackEvent:function(activity){var userObj;function sendActivity(userObj){activity.user=userObj,ACC.config.browserConsoleLogsEnabled&&console.log(JSON.stringify(activity));try{xo.activity.send(activity)}catch(ex){ACC.config.browserConsoleLogsEnabled&&console.error("AttraqtTracker send event failed :"+ex)}}ACC.config.enableAttraqtTrackerAndAB&&((userObj=localStorage.getItem("tracker_userObject"))?sendActivity(JSON.parse(userObj)):ACC.attraqTracker.getUserObjectAndCallback(sendActivity))},getUserObjectAndCallback:function(callback){$.ajax({type:"GET",url:ACC.config.sitePath+"/auid",success:function(data){userObj={identities:{sessionId:data.sessionId}},data.userId&&(userObj.identities.registered_user=data.userId),callback&&callback(userObj)},error:function(error){ACC.config.browserConsoleLogsEnabled&&console.log(error)}})},setUserObject:function(){var userO;ACC.config.enableAttraqtTrackerAndAB&&(null==(userO=localStorage.getItem("tracker_userObject")?JSON.parse(localStorage.getItem("tracker_userObject")):null)||customerLoggedIn&&!userO.identities.registered_user)&&ACC.attraqTracker.getUserObjectAndCallback(function(userObj){localStorage.setItem("tracker_userObject",JSON.stringify(userObj))})},trackPDPVariantProductClick:function(productCode){ACC.attraqTracker.pushToActivityQueue({action:"click",target:{product:productCode}},!0)},trackPlpProductClick:function(productCode,sourceId){ACC.attraqTracker.pushToActivityQueue({action:"click",target:{product:""+productCode},sourceId:""+sourceId},!0)},trackAttraqtProductCarouselProductClick:function(productCode,sourceId,themeId){ACC.attraqTracker.pushToActivityQueue({action:"click",target:{product:productCode,campaign:themeId},sourceId:sourceId,metadata:{widgetId:themeId}},!0)},trackProductCarouselProductClick:function(productCode,sourceId){ACC.attraqTracker.trackPlpProductClick(productCode,sourceId)},trackProductListView:function(pageURL,sourceId){ACC.attraqTracker.submitTrackEvent({action:"view",target:{page:""+pageURL},sourceId:""+sourceId})},trackProductSearchView:function(pageURL,sourceId,searchText){ACC.attraqTracker.submitTrackEvent({action:"view",target:{page:""+pageURL,"search-terms":""+searchText},sourceId:""+sourceId})},trackFacetSelection:function(facetId,value,sourceId){var targetObj={facet:""+facetId};targetObj[facetId]=value,ACC.attraqTracker.pushToActivityQueue({action:"click",target:targetObj,sourceId:""+sourceId},!1)},trackPlacedOrder:function(gtmOrderData){var lastOrder=localStorage.getItem("tracker_lstOrdr");if(lastOrder&&lastOrder==gtmOrderData.ecommerce.purchase.actionField.id)console.log("Already sent attraqt event for Order "+lastOrder);else{localStorage.setItem("tracker_lstOrdr",gtmOrderData.ecommerce.purchase.actionField.id);for(var i=0;i<gtmOrderData.ecommerce.purchase.products.length;i++){var prod=gtmOrderData.ecommerce.purchase.products[i],prod={action:"purchase",target:{product:""+prod.dimension2},metadata:{price:100*prod.price,currency:""+gtmOrderData.ecommerce.currencyCode,quantity:prod.quantity}};ACC.attraqTracker.submitTrackEvent(prod)}}},trackAddToCartClick:function(productCode,metadata){ACC.attraqTracker.submitTrackEvent({action:"add-to-cart",target:{product:""+productCode},metadata:metadata})},trackRemoveFromCart:function(productCode){ACC.attraqTracker.submitTrackEvent({action:"remove-from-cart",target:{product:""+productCode}})},getActivityQueue:function(resetFlag){return resetFlag&&sessionStorage.removeItem(ACC.attraqTracker.trackerQueue),sessionStorage.getItem(ACC.attraqTracker.trackerQueue)?JSON.parse(sessionStorage.getItem(ACC.attraqTracker.trackerQueue)):[]},pushToActivityQueue:function(activityObj,resetQueue){resetQueue=ACC.attraqTracker.getActivityQueue(resetQueue);resetQueue.push(activityObj),sessionStorage.setItem(ACC.attraqTracker.trackerQueue,JSON.stringify(resetQueue))},submitQueuedActivities:function(){var activityQueue=ACC.attraqTracker.getActivityQueue(!1);$.each(activityQueue,function(index,activityObj){ACC.attraqTracker.submitTrackEvent(activityObj)}),sessionStorage.removeItem(ACC.attraqTracker.trackerQueue)}};